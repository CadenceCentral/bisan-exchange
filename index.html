<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bisan Exchange</title>

  <style>
    :root{
      --bg: url("assets/bg.jpg");
      --ink: rgba(214, 255, 255, 0.92);
      --muted: rgba(214, 255, 255, 0.55);
      --glass: rgba(6, 18, 28, 0.58);
      --glass2: rgba(6, 18, 28, 0.78);
      --border: rgba(120, 220, 255, 0.20);
      --accent: rgba(120, 220, 255, 0.85);
    }

    *{ box-sizing: border-box; }
    html,body{ height: 100%; margin: 0; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace; }

    /* Full-bleed background */
    body{
      background: var(--bg) center / cover no-repeat fixed;
      color: var(--ink);
      overflow: hidden;
    }

    /* Darken + soften so terminal reads */
    .veil{
      position: fixed; inset: 0;
      background:
        radial-gradient(1200px 700px at 70% 20%, rgba(0, 170, 255, 0.14), transparent 60%),
        radial-gradient(900px 600px at 20% 70%, rgba(0, 255, 190, 0.09), transparent 55%),
        linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.75));
      backdrop-filter: blur(2px) saturate(1.1);
    }

    /* Subtle scanlines + noise */
    .fx{
      position: fixed; inset: 0;
      pointer-events: none;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(255,255,255,0.03) 0px,
          rgba(255,255,255,0.03) 1px,
          rgba(0,0,0,0.0) 3px,
          rgba(0,0,0,0.0) 6px
        );
      mix-blend-mode: overlay;
      opacity: 0.18;
      animation: drift 9s linear infinite;
    }
    @keyframes drift {
      0% { transform: translateY(0px); }
      100% { transform: translateY(18px); }
    }

    /* Layout */
    .wrap{
      position: relative;
      height: 100%;
      display: grid;
      place-items: center;
      padding: 24px;
    }

    /* Terminal card */
    .term{
      width: min(880px, 96vw);
      border: 1px solid var(--border);
      background: linear-gradient(180deg, var(--glass), var(--glass2));
      border-radius: 18px;
      box-shadow: 0 30px 90px rgba(0,0,0,0.55);
      overflow: hidden;
    }

    .bar{
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 14px;
      border-bottom: 1px solid rgba(120, 220, 255, 0.14);
      background: rgba(0,0,0,0.22);
    }
    .dots{ display:flex; gap:8px; }
    .dot{ width:10px; height:10px; border-radius: 50%; background: rgba(255,255,255,0.18); }
    .title{
      font-size: 12px;
      color: var(--muted);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      user-select: none;
    }

    .screen{
      padding: 18px 18px 14px;
      min-height: 360px;
      line-height: 1.45;
      font-size: 14px;
    }

    .line{ white-space: pre-wrap; margin: 0 0 6px 0; }
    .muted{ color: var(--muted); }
    .accent{ color: var(--accent); }

    .prompt{
      display: inline-block;
      color: rgba(120, 220, 255, 0.95);
      margin-right: 8px;
    }

    /* Scrolling status strip */
    .ticker{
      border-top: 1px solid rgba(120, 220, 255, 0.14);
      background: rgba(0,0,0,0.18);
      padding: 10px 0;
      overflow: hidden;
    }
    .ticker span{
      display: inline-block;
      padding-left: 100%;
      white-space: nowrap;
      color: rgba(214, 255, 255, 0.68);
      animation: scroll 14s linear infinite; /* <-- slow this (bigger = slower) */
    }
    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    /* Cursor */
    .cursor{
      display:inline-block;
      width: 10px;
      margin-left: 3px;
      opacity: 0.9;
      animation: blink 1.8s steps(2, start) infinite; /* <-- slower blink */
    }
    @keyframes blink { to { opacity: 0; } }
  </style>
</head>

<body>
  <div class="veil"></div>
  <div class="fx"></div>

  <div class="wrap">
    <div class="term" role="region" aria-label="Bisan Exchange Terminal">
      <div class="bar">
        <div class="dots">
          <div class="dot"></div><div class="dot"></div><div class="dot"></div>
        </div>
        <div class="title">Bisan Exchange — backchannel</div>
        <div class="title muted">node: market-relay</div>
      </div>

      <div class="screen" id="screen" aria-live="polite"></div>

      <div class="ticker">
        <span id="tickerText">
          TEMPORARY DISCONNECT // ERROR: NX-41A7 // RELAY HANDSHAKE FAILED // RETRY WINDOW: 00:13 // DO NOT REFRESH //
        </span>
      </div>
    </div>
  </div>

  <script>
    /**
     * BACKDOOR / FUTURE-TECH TERMINAL
     * - slower typing
     * - small pauses for menace
     * - optional “glitch” flicker
     */

    const screen = document.getElementById("screen");

    // --- SPEED CONTROLS (these are the lines you’ll tweak) ---
    const TYPE_MS = 80;          // typing speed (60–95 feels right)
    const LINE_PAUSE_MS = 550;   // pause between lines
    const BLOCK_PAUSE_MS = 1200; // pause between “sections”
    // --------------------------------------------------------

    const lines = [
      { text: "[INIT] market-relay :: tunnel request queued", cls: "muted" },
      { text: "[AUTH] keyring: BISAN//EXCHANGE//LOCAL", cls: "muted" },
      { text: "[HANDSHAKE] establishing...", cls: "muted" },

      { pause: BLOCK_PAUSE_MS },

      { text: "> ACCESS REQUEST: BISAN_EXCHANGE/market", cls: "" },
      { text: "[TRACE] spoof route: cad-net → basin-node → easton relay", cls: "muted" },
      { text: "[OK] cam lattice: cloaked", cls: "muted" },
      { text: "[OK] inventory mirror: cached", cls: "muted" },

      { pause: BLOCK_PAUSE_MS },

      { text: "[WARN] market relay experiencing temporary disconnect", cls: "accent" },
      { text: "ERROR: NX-41A7 // handshake drift beyond tolerance", cls: "accent" },
      { text: "suggested action: hold position • do not refresh • await window", cls: "muted" },

      { pause: BLOCK_PAUSE_MS },

      { text: "> REQUEST STATUS", cls: "" },
      { text: "[RESPONSE] pending…", cls: "muted" },
    ];

    function addLineContainer(cls=""){
      const p = document.createElement("p");
      p.className = "line " + cls;
      screen.appendChild(p);
      return p;
    }

    function sleep(ms){ return new Promise(r => setTimeout(r, ms)); }

    async function typeText(el, text){
      // Slight variance so it feels human / machine-ish
      for (let i = 0; i < text.length; i++){
        el.textContent += text[i];
        const jitter = Math.random() < 0.06 ? (TYPE_MS * 3) : 0;
        await sleep(TYPE_MS + jitter);
      }
    }

    async function run(){
      screen.innerHTML = "";
      // boot line w/ cursor
      const boot = addLineContainer("muted");
      boot.innerHTML = `<span class="prompt">└</span> session open<span class="cursor">▌</span>`;
      await sleep(420);
      boot.innerHTML = `<span class="prompt">└</span> session open`;

      for (const item of lines){
        if (item.pause){
          await sleep(item.pause);
          continue;
        }
        const el = addLineContainer(item.cls || "");
        await typeText(el, item.text);
        await sleep(LINE_PAUSE_MS);
        // keep view pinned to bottom
        screen.scrollTop = screen.scrollHeight;
      }

      // idle cursor at end
      const end = addLineContainer("");
      end.innerHTML = `<span class="prompt">></span><span class="cursor">▌</span>`;
    }

    run();

    // OPTIONAL: subtle glitch pulse (very light)
    // If you want more glitch, increase opacity changes or shorten interval.
    setInterval(() => {
      const fx = document.querySelector(".fx");
      fx.style.opacity = (Math.random() * 0.08 + 0.14).toFixed(2);
    }, 900);
  </script>
</body>
</html>
