<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bisan Exchange</title>

  <style>
    :root{
      --bg: url("assets/bg.png");
      --ink: rgba(214, 255, 255, 0.92);
      --muted: rgba(214, 255, 255, 0.55);
      --glass: rgba(6, 18, 28, 0.58);
      --glass2: rgba(6, 18, 28, 0.78);
      --border: rgba(120, 220, 255, 0.20);
      --accent: rgba(120, 220, 255, 0.85);
    }

    *{ box-sizing: border-box; }
    html,body{ height: 100%; margin: 0; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace; }

    /* Full-bleed background */
    body{
      background: var(--bg) center / cover no-repeat fixed;
      color: var(--ink);
      overflow: hidden;
    }

    /* Darken + soften so terminal reads */
    .veil{
      position: fixed; inset: 0;
      background:
        radial-gradient(1200px 700px at 70% 20%, rgba(0, 170, 255, 0.14), transparent 60%),
        radial-gradient(900px 600px at 20% 70%, rgba(0, 255, 190, 0.09), transparent 55%),
        linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.75));
      backdrop-filter: blur(2px) saturate(1.1);
    }

    /* Subtle scanlines */
    .fx{
      position: fixed; inset: 0;
      pointer-events: none;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(255,255,255,0.03) 0px,
          rgba(255,255,255,0.03) 1px,
          rgba(0,0,0,0.0) 3px,
          rgba(0,0,0,0.0) 6px
        );
      mix-blend-mode: overlay;
      opacity: 0.18;
      animation: drift 9s linear infinite;
    }
    @keyframes drift {
      0% { transform: translateY(0px); }
      100% { transform: translateY(18px); }
    }

    /* Layout */
    .wrap{
      position: relative;
      height: 100%;
      display: grid;
      place-items: center;
      padding: 24px;
    }

    /* Terminal card */
    .term{
      width: min(880px, 96vw);
      border: 1px solid var(--border);
      background: linear-gradient(180deg, var(--glass), var(--glass2));
      border-radius: 18px;
      box-shadow: 0 30px 90px rgba(0,0,0,0.55);
      overflow: hidden;
    }

    .bar{
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 14px;
      border-bottom: 1px solid rgba(120, 220, 255, 0.14);
      background: rgba(0,0,0,0.22);
    }

    .lefthead{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 0;
    }

    .dots{ display:flex; gap:8px; }
    .dot{ width:10px; height:10px; border-radius: 50%; background: rgba(255,255,255,0.18); }

    .title{
      font-size: 12px;
      color: var(--muted);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      user-select: none;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .sig{
      font-size: 11px;
      color: rgba(214,255,255,0.55);
      letter-spacing: 0.06em;
      text-transform: uppercase;
      user-select: none;
      white-space: nowrap;
    }

    .screen{
      padding: 18px 18px 14px;
      min-height: 360px;
      line-height: 1.45;
      font-size: 14px;
    }

    .line{ white-space: pre-wrap; margin: 0 0 6px 0; }
    .muted{ color: var(--muted); }
    .accent{ color: rgba(120, 220, 255, 0.95); }
    .warn{ color: rgba(255, 120, 120, 0.85); }

    .glitch{
      text-shadow:
        1px 0 rgba(255,0,0,.35),
       -1px 0 rgba(0,255,255,.35);
    }

    .meta{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px 16px;
      margin-bottom: 12px;
      font-size: 12px;
      color: var(--muted);
    }
    .meta b{ color: rgba(214,255,255,0.78); font-weight: 600; }

    .statusrow{
      display:flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 12px;
      font-size: 12px;
      color: var(--muted);
      gap: 16px;
    }

    .bars{
      display:flex;
      gap:4px;
      align-items:flex-end;
      flex: 0 0 auto;
    }

    .bars .bar{
      width: 4px;
      height: 6px;
      background: rgba(159,179,216,.25);
      border-radius: 2px;
      transition: height .25s ease, background .25s ease;
    }

    /* Scrolling status strip */
    .ticker{
      border-top: 1px solid rgba(120, 220, 255, 0.14);
      background: rgba(0,0,0,0.18);
      padding: 10px 0;
      overflow: hidden;
    }
    .ticker span{
      display: inline-block;
      padding-left: 100%;
      white-space: nowrap;
      color: rgba(214, 255, 255, 0.68);
      animation: scroll 14s linear infinite;
    }
    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    .footer{
      width: min(880px, 96vw);
      margin-top: 14px;
      font-size: 11px;
      color: rgba(214,255,255,.45);
      display:flex;
      justify-content: space-between;
      gap: 18px;
      padding: 0 6px;
      user-select: none;
    }
  </style>
</head>

<body>
  <div class="veil"></div>
  <div class="fx"></div>

  <div class="wrap">
    <div class="term">
      <div class="bar">
        <div class="lefthead">
          <div class="dots">
            <div class="dot"></div><div class="dot"></div><div class="dot"></div>
          </div>
          <div class="title"><strong>BISAN EXCHANGE</strong> / MARKET NODE</div>
        </div>
        <div class="sig">ELITE SKYWAY RELAY · ACTIVE</div>
      </div>

      <div class="screen">
        <div class="meta">
          <div><b>NODE</b> MX-LB/DOWNTOWN</div>
          <div><b>CHANNEL</b> INVENTORY</div>
          <div><b>SEC</b> COMPLIANCE-LAYER ON</div>
          <div><b>TIME</b> <span id="clock"></span></div>
        </div>

        <div class="log" id="log"></div>

        <div class="statusrow">
          <div id="status">STATUS: INITIALIZING…</div>
          <div class="bars" aria-hidden="true">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
          </div>
        </div>
      </div>

      <div class="ticker">
        <span id="crawl">TEMPORARY DISCONNECT · ERROR: NX-7C11 · RETRYING HANDSHAKE · MARKET NODE UNRESPONSIVE</span>
      </div>
    </div>

    <div class="footer">
      <div>© BISAN EXCHANGE · UNLISTED ROUTE</div>
      <div>IF YOU ARE SEEING THIS PAGE: CONNECTION FAILED.</div>
    </div>
  </div>

<script>
  const log = document.getElementById("log");
  const statusEl = document.getElementById("status");
  const crawl = document.getElementById("crawl");

  const codes = ["NX-7C11","LB-0A9F","SKY-13DE","ITE-44B2","MX-9D07","CRC-2F18","CEN-0D33","NX-5A1C"];

  const lines = [
    ["accent", "PING market node…"],
    ["muted",  "routing via ELITE SKYWAY relay"],
    ["muted",  "compliance-layer: handshake required"],
    ["accent", "HANDSHAKE → INIT"],
    ["warn",   "SYNC FAIL (packet loss)"],
    ["muted",  "retrying…"],
    ["accent", "HANDSHAKE → INIT"],
    ["warn",   "TEMPORARY DISCONNECT"],
    ["muted",  "telemetry mirrored to civic layer (passive)"],
  ];

  function addLine(kind, text){
    const d = document.createElement("div");
    d.className = `line ${kind}`;
    d.textContent = text;
    log.appendChild(d);
    if(log.children.length > 14) log.removeChild(log.firstChild);
  }

  function now(){
    const dt = new Date();
    const pad = n => String(n).padStart(2,"0");
    return `${pad(dt.getHours())}:${pad(dt.getMinutes())}:${pad(dt.getSeconds())}`;
  }

  function setClock(){
    document.getElementById("clock").textContent = now();
  }
  setInterval(setClock, 250);
  setClock();

  const bars = Array.from(document.querySelectorAll(".bars .bar"));

  let i = 0;
  function boot(){
    const [k, t] = lines[i % lines.length];
    addLine(k, `[${now()}] ${t}`);
    i++;

    const phase = i % 9;
    if(phase < 3) statusEl.textContent = "STATUS: LINKING…";
    else if(phase < 6) statusEl.textContent = "STATUS: HANDSHAKE FAIL";
    else statusEl.textContent = "STATUS: TEMPORARY DISCONNECT";

    const strength = Math.max(0, 5 - (phase >= 6 ? 4 : (phase >= 3 ? 2 : 1)));
    bars.forEach((b, idx) => {
      const on = idx < strength;
      const h = on ? (8 + idx*4) : (4 + Math.random()*3);
      b.style.height = `${h}px`;
      b.style.background = on ? "rgba(159,179,216,.55)" : "rgba(159,179,216,.18)";
    });

    if(phase === 8 || phase === 4){
      const code = codes[Math.floor(Math.random()*codes.length)];
      crawl.textContent = `TEMPORARY DISCONNECT · ERROR: ${code} · RETRYING HANDSHAKE · MARKET NODE UNRESPONSIVE`;
      crawl.classList.add("glitch");
      setTimeout(()=>crawl.classList.remove("glitch"), 180);
    }
  }

  // start
  addLine("muted", `[${now()}] request received`);
  addLine("muted", `[${now()}] verifying route token…`);
  setTimeout(()=>addLine("accent", `[${now()}] token accepted`), 450);

  setInterval(boot, 700);
</script>
</body>
</html>

